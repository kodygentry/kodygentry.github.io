  <!-- Stray JS removed: animation code is now in the correct <script> block below -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kody Gentry Portfolio</title>
    <!-- Preload Roboto Mono font for monospace aesthetic -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
      /* Card populate-in animation */
      @keyframes card-pop-in {
        0% {
          opacity: 0;
          transform: translateY(32px) scale(0.98);
          filter: blur(6px);
        }
        80% {
          opacity: 1;
          transform: translateY(-4px) scale(1.01);
          filter: blur(0px);
        }
        100% {
          opacity: 1;
          transform: none;
          filter: none;
        }
      }
      .card-pop-in {
        animation: card-pop-in 0.7s cubic-bezier(0.22,0.68,0.43,1.01) both;
      }
      /* Reset styles and base typography */
      *, *::before, *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: 'Roboto Mono', ui-monospace, Menlo, Monaco, Consolas,
          'Liberation Mono', 'Courier New', monospace;
        color: #e2e8f0;
        background: radial-gradient(
            ellipse at top,
            rgba(56, 189, 248, 0.25),
            transparent 60%
          ),
          radial-gradient(
            ellipse at bottom,
            rgba(59, 130, 246, 0.2),
            transparent 60%
          ),
          #0f172a;
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }
      /* Dot-dither starfield */
      body::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image: radial-gradient(
            rgba(255, 255, 255, 0.6) 1px,
            transparent 1px
          );
        background-size: 3px 3px;
        opacity: 0.08;
        mix-blend-mode: soft-light;
        pointer-events: none;
      }
      /* Horizon grid (reminiscent of retro CRT floor) */
      body::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 40vh;
        perspective: 800px;
        pointer-events: none;
      }
      body::after::before {
        content: '';
        position: absolute;
        inset: 0;
        transform-origin: bottom;
        transform: rotateX(60deg);
        background-image: linear-gradient(
            rgba(255, 255, 255, 0.08) 1px,
            transparent 1px
          ),
          linear-gradient(
            90deg,
            rgba(255, 255, 255, 0.08) 1px,
            transparent 1px
          );
        background-size: 40px 40px;
        pointer-events: none;
      }
      /* Layout container */
      .container {
        max-width: 960px;
        margin: 0 auto;
        padding: 2rem 1rem 4rem;
      }
      /* Hero card styling */
      .hero-card {
        position: relative;
        margin: 0 auto 2rem;
        padding: 2rem;
        border-radius: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.15);
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(12px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
        overflow: hidden;
      }
      .hero-card-animated-bg {
        position: absolute;
        inset: 0;
        z-index: 0;
        border-radius: inherit;
        pointer-events: none;
        background: linear-gradient(120deg, #38bdf8 0%, #64748b 40%, #e0e7ef 80%, #ffffff 100%);
        opacity: 0.38;
        filter: blur(32px) brightness(1.2) saturate(1.1);
        animation: wave-gradient 3.5s cubic-bezier(0.4,0.2,0.6,0.8) infinite alternate;
        background-size: 200% 200%;
      }
      @keyframes wave-gradient {
        0% {
          background-position: 0% 50%;
        }
        33% {
          background-position: 100% 30%;
        }
        66% {
          background-position: 50% 100%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      .hero-card::before {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: inherit;
        background: linear-gradient(
          135deg,
          rgba(6, 182, 212, 0.4),
          rgba(79, 70, 229, 0.4),
          rgba(99, 102, 241, 0.4)
        );
        z-index: -1;
        filter: blur(20px);
      }
      .hero-icons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }
      .hero-icons div {
        width: 2.5rem;
        height: 2.5rem;
        display: grid;
        place-items: center;
        border-radius: 0.75rem;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: rgba(255,255,255,0.18);
        backdrop-filter: blur(10px) saturate(1.2);
        box-shadow: 0 2px 8px rgba(30,41,59,0.10);
      }
      .hero-card h1 {
        font-size: clamp(2rem, 8vw, 3.5rem);
        font-weight: 800;
        color: #dbeafe;
        letter-spacing: -1px;
        text-align: center;
      }
      .hero-card p {
        text-align: center;
        margin-top: 0.5rem;
        color: #cbd5e1;
      }
      .hero-links {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1.5rem;
      }
      .hero-links a {
        padding: 0.5rem 1.25rem;
        border-radius: 9999px;
        background: rgba(255,255,255,0.18);
        color: #e2e8f0;
        text-decoration: none;
        border: 1px solid rgba(255, 255, 255, 0.13);
        backdrop-filter: blur(10px) saturate(1.2);
        box-shadow: 0 2px 8px rgba(30,41,59,0.10);
        transition: background 0.2s;
      }
      .hero-links a:hover {
        background: rgba(59, 130, 246, 0.22);
      }
      /* Tabs bar */
      .tabs {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        margin-bottom: 2rem;
        border-radius: 1rem;
        background: rgba(255,255,255,0.18);
        overflow: hidden;
        backdrop-filter: blur(10px) saturate(1.2);
        box-shadow: 0 2px 8px rgba(30,41,59,0.10);
      }
      .tabs button {
        padding: 0.75rem;
        color: #bfdbfe;
        background: transparent;
        border: none;
        font-size: 0.9rem;
        cursor: pointer;
        transition: background 0.2s, color 0.2s;
        border-right: 1px solid rgba(255,255,255,0.10);
        backdrop-filter: none;
      }
      .tabs button:last-child {
        border-right: none;
      }
      .tabs button.active {
        background: rgba(59,130,246,0.22);
        color: #fff;
        font-weight: 600;
        backdrop-filter: blur(2px);
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      /* Accordion styling */
      .accordion {
        border-top: 1px solid rgba(255, 255, 255, 0.2);
      }
      .accordion details {
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      }
      .accordion summary {
        display: flex;
        justify-content: space-between;
        padding: 1rem;
        cursor: pointer;
        color: #bfdbfe;
        font-weight: 500;
      }
      .accordion details[open] summary {
        background: rgba(255, 255, 255, 0.05);
      }
      .accordion details summary::after {
        content: '\25be';
        transition: transform 0.3s;
      }
      .accordion details[open] summary::after {
        transform: rotate(180deg);
      }
      /* Grid for cards */
      .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-top: 1rem;
      }
      .project-card,
      .game-card {
        position: relative;
        border-radius: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.15);
        background: rgba(15, 23, 42, 0.5);
        padding: 1rem;
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.25);
        transition: transform 0.1s, box-shadow 0.2s, background 0.2s, border 0.2s;
        overflow: hidden;
      }
      .project-card-highlight {
        border: 1.5px solid #60a5fa;
        background: linear-gradient(120deg, rgba(96,165,250,0.10) 0%, rgba(224,231,239,0.07) 100%);
        box-shadow: 0 0 0 1.5px #60a5fa55, 0 4px 16px rgba(96,165,250,0.07);
      }
      .project-card::before,
      .game-card::before {
        content: '';
        position: absolute;
        inset: -3px;
        border-radius: inherit;
        z-index: 1;
        opacity: 0;
        pointer-events: none;
        background: linear-gradient(120deg, #38bdf8 0%, #64748b 40%, #e0e7ef 80%, #ffffff 100%);
        filter: blur(8px) brightness(1.05) saturate(1.05);
        background-size: 200% 200%;
        transition: opacity 0.25s;
      }
      .project-card:hover::before,
      .game-card:hover::before {
        opacity: 0.45;
        animation: wave-gradient 3.5s cubic-bezier(0.4,0.2,0.6,0.8) infinite alternate;
      }
      .project-card:hover,
      .game-card:hover {
        transform: translateY(-2px);
        z-index: 2;
      }
      .project-card h3,
      .game-card h3 {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #dbeafe;
        transition: color 0.2s;
      }
      .project-card p,
      .game-card p {
        font-size: 0.8rem;
        color: #94a3b8;
        margin-bottom: 0.5rem;
        transition: color 0.2s;
      }
      .project-card:hover h3,
      .game-card:hover h3,
      .project-card:hover p,
      .game-card:hover p,
      .project-card:hover .project-meta,
      .game-card:hover .project-meta {
        color: #fff !important;
      }
      .project-meta {
        font-size: 0.75rem;
        display: flex;
        gap: 0.75rem;
        margin-top: 0.5rem;
      }
      .project-meta span {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
      }
      .project-meta a {
        color: #7dd3fc;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <main class="container">
      <!-- Hero section -->
      <section class="hero-card">
        <div class="hero-card-animated-bg"></div>
        <div class="hero-icons">
          <div>
            <i class="fa-solid fa-gamepad" style="font-size:1.3rem;color:white;"></i>
          </div>
          <div>
            <i class="fa-solid fa-code" style="font-size:1.3rem;color:white;"></i>
          </div>
          <div>
            <i class="fa-solid fa-palette" style="font-size:1.3rem;color:white;"></i>
          </div>
        </div>
        <h1>Kody Gentry</h1>
        <p>Software Dev ¬∑ Game Dev ¬∑ 3D Artist</p>
        <p>Founder of Chum Studios</p>
        <div class="hero-links">
          <a href="https://github.com/kodygentry" target="_blank" rel="noopener">GitHub</a>
          <a href="mailto:kodygentry3737@gmail.com">Email</a>
        </div>
      </section>
      <!-- Tabs bar -->
      <nav class="tabs" role="tablist">
        <button id="tab-software" class="active" role="tab" aria-selected="true">Software</button>
        <button id="tab-games" role="tab" aria-selected="false">Games</button>
        <button id="tab-art" role="tab" aria-selected="false">3D / Art</button>
      </nav>
      <!-- Tab contents -->
      <section id="content-software" class="tab-content active" aria-labelledby="tab-software">
        <div class="accordion">
          <details>
            <summary>Side projects</summary>
            <div class="card-grid" id="side-projects"></div>
          </details>
          <details>
            <summary>School projects</summary>
            <div class="card-grid" id="school-projects"></div>
          </details>
          <details>
            <summary>Game dev (code repos)</summary>
            <div class="card-grid" id="game-projects"></div>
          </details>
        </div>
      </section>
      <section id="content-games" class="tab-content" aria-labelledby="tab-games">
        <div class="card-grid" id="game-cards"></div>
      </section>
      <section id="content-art" class="tab-content" aria-labelledby="tab-art">
        <div class="game-card">
          <h3>3D Props & Environments</h3>
          <p>Assorted low-poly props and moody environment studies.</p>
          <strong>Work in progress!</strong>
          <p class="project-meta"><span>Tools:</span> Blender, Game Art</p>
        </div>
        <div class="card-grid" style="margin-top:1.2rem;">
          <div class="game-card">
            <img src="static/assets/img.png" alt="Chum Studios" style="width:100%;height:160px;object-fit:contain;border-radius:0.5rem;margin-bottom:0.5rem;background:#1e293b;" />
            <h3>Chum Studios</h3>
            <p>Studio logo and branding.</p>
          </div>
          <div class="game-card">
            <img src="static/assets/seths_logo.png" alt="Fan Art - Seth's Logo" style="width:100%;height:160px;object-fit:contain;border-radius:0.5rem;margin-bottom:0.5rem;background:#1e293b;" />
            <h3>Fan Art: Seth's Logo</h3>
            <p>Logo fan art for Seth's channel.</p>
          </div>
        </div>
      </section>
    </main>
    <footer style="text-align:center; padding: 1rem 0; font-size: 0.75rem; color: #64748b;">
      ¬© <script>document.write(new Date().getFullYear());</script> Kody Gentry ¬∑ Chum Studios
    </footer>
    <script>
      // Tab switching logic
      document.querySelectorAll('.tabs button').forEach((btn) => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.tabs button').forEach((b) => {
            b.classList.remove('active');
            b.setAttribute('aria-selected', 'false');
          });
          document.querySelectorAll('.tab-content').forEach((c) => c.classList.remove('active'));
          btn.classList.add('active');
          btn.setAttribute('aria-selected', 'true');
          const contentId = btn.id.replace('tab', 'content');
          document.getElementById(contentId).classList.add('active');
        });
      });
      // Categorization helpers matching the React code logic
      const SIDE_OVERRIDE = new Set(['SimpleAPI','Marvel-Rivals-Discord-Stat-Bot','KimoTune','Advent-Of-Code-2023']);
      const GAME_OVERRIDE = new Set(['DevQuest','godot-dot-shader']);
      const SCHOOL_HINTS = ['assembly','mips','x86','arm','object oriented','oop','data structures','algorithms','cs','class','assignment','lab','university','college','school','project','semester','spring','fall'];
      const SCHOOL_LANGS = ['C','C++','Assembly','Makefile'];
      function categorizeRepo(r) {
        if (GAME_OVERRIDE.has(r.name)) return 'game';
        if (SIDE_OVERRIDE.has(r.name)) return 'side';
        const name = (r.name || '').toLowerCase();
        const desc = (r.description || '').toLowerCase();
        const lang = r.language || '';
        const hasHint = SCHOOL_HINTS.some((k) => name.includes(k) || desc.includes(k));
        const langHint = SCHOOL_LANGS.includes(lang);
        return hasHint || langHint ? 'school' : 'side';
      }
      async function loadGithubRepos() {
        try {
          const res = await fetch('https://api.github.com/users/kodygentry/repos?per_page=100');
          if (!res.ok) throw new Error('GitHub ' + res.status);
          const data = await res.json();
          const filtered = data.filter((r) => !r.fork);
          const sorted = filtered.sort((a, b) => (b.stargazers_count || 0) - (a.stargazers_count || 0)).slice(0, 60);
          const categorized = { side: [], school: [], game: [] };
          sorted.forEach((r) => {
            const type = categorizeRepo(r);
            categorized[type].push(r);
          });
          renderRepos('side-projects', categorized.side);
          renderRepos('school-projects', categorized.school);
          renderRepos('game-projects', categorized.game);
        } catch (err) {
          document.getElementById('side-projects').innerHTML = '<p>Error loading repos: ' + err.message + '</p>';
        }
      }
      function renderRepos(id, repos) {
        const container = document.getElementById(id);
        container.innerHTML = '';
        if (!repos || repos.length === 0) {
          container.innerHTML = '<p class="text-sm text-slate-400">No projects found.</p>';
          return;
        }
        // Highlighted repos for side and school
        const highlightSide = ["KimoTune","SimpleAPI","Marvel-Rivals-Discord-Stat-Bot"];
        const highlightSchool = ["Tic-Tac-Toe-AI","Cardiovascular-Disease-Diagnosis-Expert-System","General-CPP-Programs"];
        let highlightList = [];
        if (id === 'side-projects') highlightList = highlightSide;
        if (id === 'school-projects') highlightList = highlightSchool;
        // Sort so highlights are first, in the order specified
        let sorted = repos.slice();
        if (highlightList.length) {
          const highlights = highlightList
            .map(name => sorted.find(r => r.name === name))
            .filter(Boolean);
          const rest = sorted.filter(r => !highlightList.includes(r.name));
          sorted = [...highlights, ...rest];
        }
        sorted.forEach((r, i) => {
          const isHighlight = highlightList.includes(r.name) && i < 3;
          const div = document.createElement('div');
          div.className = 'project-card' + (isHighlight ? ' project-card-highlight' : '');
          div.innerHTML = `
            <h3>${r.name}</h3>
            <p>${r.description ? r.description : 'No description provided.'}</p>
            <div class="project-meta">
              <span>‚≠ê ${r.stargazers_count || 0}</span>
              <span>üç¥ ${r.forks_count || 0}</span>
              <a href="${r.html_url}" target="_blank" rel="noopener">View on GitHub</a>
            </div>
          `;
          container.appendChild(div);
        });
      }
      async function loadItchGames() {
        // Fallback SVG for controller icon (set before use)
        if (!window.fallbackControllerSVG) {
          window.fallbackControllerSVG = `<div style="width:100%;height:120px;display:flex;align-items:center;justify-content:center;background:rgba(59,130,246,0.08);border-radius:0.5rem;margin-bottom:0.5rem;">
            <i class='fa-solid fa-gamepad' style="font-size:3rem;color:#38bdf8;"></i>
          </div>`;
        }
        const games = [
          {
            url: 'https://chumstudios.itch.io/midnight-slice-demo',
            title: 'Midnight Slice Demo',
            description: 'A retro horror slice-em-up. Survive the night and slice the monsters!'
          },
          {
            url: 'https://chumstudios.itch.io/eternal-burn',
            title: 'Eternal Burn',
            description: 'A fast-paced endless runner with a fiery twist.'
          }
        ];
        const container = document.getElementById('game-cards');
        container.innerHTML = '';
        for (const game of games) {
          try {
            const res = await fetch('https://itch.io/oembed?url=' + encodeURIComponent(game.url));
            let data = {};
            if (res.ok) {
              data = await res.json();
            }
            const div = document.createElement('div');
            div.className = 'game-card';
            let imgHtml = '';
            if (data.thumbnail_url) {
              imgHtml = `<img src="${data.thumbnail_url}" alt="${game.title} cover" style="width:100%;height:120px;object-fit:cover;border-radius:0.5rem;margin-bottom:0.5rem;" onerror="this.onerror=null;this.outerHTML=window.fallbackControllerSVG;" />`;
            } else {
              imgHtml = window.fallbackControllerSVG;
            }
            div.innerHTML = `
              <h3>${game.title}</h3>
              <p>${game.description}</p>
              ${imgHtml}
              <a href="${game.url}" target="_blank" rel="noopener" style="color:#7dd3fc;text-decoration:underline;font-size:0.85rem;">Play</a>
            `;
            container.appendChild(div);
          } catch (err) {
            const div = document.createElement('div');
            div.className = 'game-card';
            div.innerHTML = `
              <h3>${game.title}</h3>
              <p>${game.description}</p>
              ${window.fallbackControllerSVG}
              <a href="${game.url}" target="_blank" rel="noopener" style="color:#7dd3fc;text-decoration:underline;font-size:0.85rem;">Play</a>
            `;
            container.appendChild(div);
          }
        }
        // Fallback SVG for controller icon
        if (!window.fallbackControllerSVG) {
          window.fallbackControllerSVG = `<svg width="100%" height="120" viewBox="0 0 24 24" fill="none" stroke="#38bdf8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:block;margin:0 auto 0.5rem auto;background:rgba(59,130,246,0.08);border-radius:0.5rem;"><rect x="2" y="7" width="20" height="10" rx="5"/><circle cx="7" cy="12" r="1.5"/><circle cx="17" cy="12" r="1.5"/><path d="M7 12h-2m1-1v2"/></svg>`;
        }
      }
      // Initiate data fetches on page load
      loadGithubRepos();
      loadItchGames();
    </script>
    <script>
      // Animate cards as they enter the viewport
      function animateCardsOnScroll() {
        const observer = new window.IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('card-pop-in');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });
        document.querySelectorAll('.project-card, .game-card').forEach(card => {
          observer.observe(card);
        });
      }
      // Re-run after dynamic content loads, but only patch once
      if (!window._cardPopInPatched) {
        window._cardPopInPatched = true;
        const origRenderRepos = window.renderRepos;
        window.renderRepos = function(id, repos) {
          origRenderRepos(id, repos);
          setTimeout(animateCardsOnScroll, 0);
        };
        const origLoadItchGames = window.loadItchGames;
        window.loadItchGames = async function() {
          await origLoadItchGames();
          setTimeout(animateCardsOnScroll, 0);
        };
      }
      // Initial call for cards already in DOM
      window.addEventListener('DOMContentLoaded', animateCardsOnScroll);
    </script>
  </body>
</html>